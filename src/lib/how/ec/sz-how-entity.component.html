<sz-how-toolbar 
    [stepsByVirtualId]="resolutionStepsByVirtualId"
    [finalVirtualEntities]="finalCardsData"
    [finalEntityId]="entityId"
    *ngIf="showToolBar"
></sz-how-toolbar>
<div class="steps">
    <sz-how-virtual-card *ngFor="let fCardData of finalCardsData; let fCardIndex=index"
        class="virtual-entity-card inbound-entity-card"
        [attr.data-index]="fCardIndex"
        [attr.data-step]="getStepNumberByVirtualEntityId(fCardData.virtualEntityId)"
        [attr.virtual-entity-id]="fCardData.virtualEntityId"
        cardType="Entity"
        recordLimit="2"
        [cardId]="entityId"
        [data]="fCardData"
        [featureOrder]="orderedFeatures"
        [preceedingStep]="getConstructionStepForVirtualEntity(fCardData.virtualEntityId)"
        (moreLinkClicked)="onRecordsMoreLinkClicked($event)"
    ></sz-how-virtual-card>

    <sz-how-step *ngFor="let stepData of resolutionSteps; let stepIndex=index"
    [attr.data-index]="stepIndex"
    [attr.data-step]="stepData.stepNumber"
    recordLimit="2"
    [virtualEntityId]="stepData.resolvedVirtualEntityId"
    [data]="stepData"
    [stepsByVirtualId]="resolutionStepsByVirtualId"
    [featureOrder]="orderedFeatures"
    (recordsMoreLinkClicked)="onRecordsMoreLinkClicked($event)"
></sz-how-step>
<!--<sz-how-entity-card-final *ngFor="let fCardData of finalCardsData; let fCardIndex=index"
    [attr.data-index]="fCardIndex"
    [attr.data-step]="fCardData.stepNumber"
    [attr.resolved-entity-id]="fCardData.resolvedVirtualEntityId"
    [entityId]="entityId"
    [data]="fCardData"
    [featureOrder]="orderedFeatures"
></sz-how-entity-card-final>-->
</div>