
<!-- @senzing/sdk/entity/detail/sz-entity-detail -->
<div #nativeElementRef>
  <sz-entity-detail-header
  [entity]="entity"
  [forceLayout]="_forceLayout"
  [layoutClasses]="_layoutEnforcers">
  </sz-entity-detail-header>

  <sz-entity-detail-graph data-html2canvas-ignore
    *ngIf="graphData && this.showGraphSection"
    [data]="graphData"
    [title]="this.graphTitle"
    [showPopOutIcon]="graphShowPopOutIcon"
    [popOutIconPosition]="graphPopOutIconPosition"
    (popoutClick)="onGraphPopoutClick($event)"
    [showMatchKeyControl]="graphShowMatchKeyControl"
    [showFiltersControl]="graphShowFiltersControl"
    [showMatchKeys]="this._showGraphMatchKeys"
    (contextMenuClick)="onGraphRightClick($event)"
    (entityClick)="onGraphEntityClick($event)"
  ></sz-entity-detail-graph>

  <sz-entity-details-section class="details-section datasources"
    *ngIf="entity?.resolvedEntity?.records?.length && this.showMatchesSection"
    collapsedStatePrefsKey="recordsSectionCollapsed"
    (onCollapsedChange)="this.onSectionCollapsedChange('recordsSectionCollapsed', $event)"
    [sectionData]="entity?.resolvedEntity?.records"
    [sectionTitle]="'Matched Records'"
    sectionId="detail-section-1"
    [sectionCount]="entity?.resolvedEntity?.records?.length"
    [forceLayout]="_forceLayout"
    [layoutClasses]="_layoutEnforcers"
    (entityRecordClick)="onEntityRecordClick($event)">
  </sz-entity-details-section>

  <sz-entity-details-section class="details-section possible"
    *ngIf="this._possibleMatches?.length && this.showPossibleMatchesSection"
    collapsedStatePrefsKey="possibleMatchesSectionCollapsed"
    (onCollapsedChange)="this.onSectionCollapsedChange('possibleMatchesSectionCollapsed', $event)"
    [sectionData]="this._possibleMatches"
    [sectionTitle]="'Possible Matches'"
    sectionId="detail-section-2"
    [sectionCount]="this._possibleMatches?.length"
    [forceLayout]="_forceLayout"
    [layoutClasses]="_layoutEnforcers"
    (onCollapsedChange)="this.onSectionCollapsedChange('possibleMatches', $event)"
    (entityRecordClick)="onEntityRecordClick($event)">
  </sz-entity-details-section>
  <sz-entity-details-section class="details-section discovered"
    *ngIf="this._discoveredRelationships?.length && this.showPossibleRelationshipsSection"
    collapsedStatePrefsKey="possibleRelationshipsSectionCollapsed"
    (onCollapsedChange)="this.onSectionCollapsedChange('possibleRelationshipsSectionCollapsed', $event)"
    [sectionData]="this._discoveredRelationships"
    [sectionTitle]="'Possible Relationships'"
    sectionId="detail-section-3"
    [sectionCount]="this._discoveredRelationships?.length"
    [forceLayout]="_forceLayout"
    [layoutClasses]="_layoutEnforcers"
    (entityRecordClick)="onEntityRecordClick($event)">
  </sz-entity-details-section>
  <sz-entity-details-section class="details-section disclosed"
    *ngIf="this._disclosedRelationships?.length && this.showDisclosedSection"
    collapsedStatePrefsKey="disclosedRelationshipsSectionCollapsed"
    (onCollapsedChange)="this.onSectionCollapsedChange('disclosedRelationshipsSectionCollapsed', $event)"
    [sectionData]="this._disclosedRelationships"
    [sectionTitle]="'Disclosed Relationships'"
    sectionId="detail-section-4"
    [sectionCount]="this._disclosedRelationships?.length"
    [forceLayout]="_forceLayout"
    [layoutClasses]="_layoutEnforcers"
    (entityRecordClick)="onEntityRecordClick($event)">
  </sz-entity-details-section>
</div>
